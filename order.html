<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Order Metal Card — QFS</title>

<style>
:root{
  --gold:#d4af37;
  --bg:#ffffff;
  --card:#ffffff;
  --text:#0b1220;
  --muted:#6b7280;
  --accent:#3fa0ff;
  --radius:14px;
  --panel-w:420px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  background:var(--bg);
  color:var(--text);
}

.wrap {
  max-width:960px;
  margin:28px auto;
  padding:18px;
  display:flex;
  gap:20px;
  align-items:flex-start;
  justify-content:center;
  flex-wrap:wrap;
}

.visual {
  flex:1 1 520px;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
  transition: box-shadow 0.3s ease;
  border-radius:12px;
}

.card-row {
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:10px;
}

.card-view {
  width:140px;
  height:80px;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  background:transparent;
  position:relative;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  perspective:1000px;
}

.card-view:hover {
  cursor:pointer;
  box-shadow: 0 15px 25px rgba(0,0,0,0.25);
}

.card-img {
  width:100%;
  height:auto;
  object-fit:cover;
  border-radius:8px;
  transition: transform 0.2s ease, border 0.2s ease;
  border:2px solid transparent;
}

.card-img.selected {
  border:3px solid var(--accent);
}

.title { font-size:18px; font-weight:700; text-align:center; margin-top:6px; }
.desc { color:var(--muted); text-align:center; font-size:13px; margin-top:4px; }

/* === Perks panel with slide animation === */
.perks-panel {
  margin-top:10px;
  padding:12px;
  border-radius:10px;
  background: linear-gradient(to bottom, #d3d3d3, #f0f0f0);
  border:1px solid rgba(15,20,32,0.06);
  width:100%;
  max-width:420px;
  opacity:0;
  transform: translateY(20px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}
.perks-panel.show {
  opacity:1;
  transform: translateY(0);
}
.perks-panel strong {
  display:block;
  font-size:16px;
  color:#222;
  margin-bottom:6px;
}
.perks-panel ul { padding-left:20px; margin:6px 0 0 0; }
.perks-panel li { margin-bottom:4px; font-weight:600; }

.panel {
  width:var(--panel-w);
  background:var(--card);
  border-radius:var(--radius);
  padding:18px;
  border:1px solid rgba(15,20,32,0.04);
  box-shadow: 0 8px 30px rgba(2,6,23,0.04);
  display:flex;
  flex-direction:column;
  gap:10px;
}

.heading { font-size:20px; font-weight:800; }
.sub { color:var(--muted); font-size:13px; }

.qty-note {
  margin-top:8px;
  font-size:13px;
  color:#555;
  text-align:center;
  line-height:1.4;
}
.qty-note strong {
  color:#000;
}

label { display:block; font-size:13px; color:var(--muted); margin-top:8px; margin-bottom:6px; }

.pay-now-wrapper { display:flex; justify-content:center; margin-top:20px; }
.pay-btn {
  padding:14px 32px;
  background:#1a73e8;
  color:white;
  font-size:16px;
  font-weight:600;
  border:none;
  border-radius:8px;
  cursor:pointer;
  transition: background 0.3s ease;
}
.pay-btn:hover { background:#1558b0; }

.price-box {
  margin-top:12px;
  padding:12px;
  border-radius:10px;
  text-align:center;
  border:1px solid rgba(212,175,55,0.04);
  transition: background 0.3s ease;
}

.usd { font-size:20px; font-weight:800; }
.btc { margin-top:6px; color:#0b8bd6; font-weight:700; }

.countdown { text-align:center; color:var(--muted); font-size:13px; }
.muted { text-align:center; color:var(--muted); font-size:13px; }
</style>
</head>
<body>

<div class="wrap">

  <div class="visual" id="visualCard">

    <div class="card-row">
      <div class="card-view" data-type="black">
        <img class="card-img" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/BlackCard.png">
      </div>
      <div class="card-view" data-type="gold">
        <img class="card-img selected" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/GoldCard.png">
      </div>
      <div class="card-view" data-type="silver">
        <img class="card-img" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/SilverCard.png">
      </div>
    </div>

    <div class="title">Physical Metal Bitcoin Access Card</div>
    <div class="desc">Premium laser-etched metal card with QR activation.</div>

    <div id="cardPerks" class="perks-panel"></div>

  </div>

  <div class="panel">

    <div class="heading">Order Details</div>
    <div class="sub">Select quantity.</div>

    <label for="quantity">Quantity</label>
    <select id="quantity"></select>

    <div class="price-box" id="priceBox">
      <div class="usd" id="totalUSD">$0</div>
      <div class="btc" id="totalBTC">0 BTC</div>
      <div id="btcPriceLine">BTC Price: Loading…</div>
    </div>

    <div class="qty-note">
      Black & Gold: <strong>Limited to 1 per order</strong>.<br>
      Silver: <strong>Up to 50 per order</strong>.
    </div>

    <div class="countdown">Discount ends in: <span id="countdown">--:--:--</span></div>

    <div class="pay-now-wrapper">
      <button id="payNow" class="pay-btn">Pay Now</button>
    </div>

    <div class="muted">You will be redirected to the BTC payment page.</div>
  </div>

</div>

<script>
/* PRICE TIERS */
const BASE_PRICES = {
  black: 275850,
  gold: 250765,
  silver: 3229
};

const INCREASED_PRICES = {
  black: 375650,
  gold: 255420,
  silver: 5899
};

const WALLET_ADDR = "bc1qqla2r8dmmvefq9svus0kv098nnvudsehpzmut8";

/* PERKS */
const CARD_PERKS = {
  black: [
    "Black matte + gold finish",
    "Very heavy collectible-grade metal",
    "QR, NFC & embedded cold-storage security",
    "Rare, numbered, custom engravings available",
    "Premium finishes & elite patterns",
    "VIP: NFT access, events, exclusive perks",
    "Display case + certificate",
    "Advanced: encrypted QR + holographic verification",
    "25k Bitcoin"
  ],
  gold: [
    "Gold-plated premium metal",
    "Heavy premium feel",
    "QR + NFC chip",
    "Limited batch, numbered",
    "Laser-etched hologram engraving",
    "Exclusive digital community access",
    "Premium presentation box",
    "Tamper-evident hologram seal",
    "25k Bitcoin"
  ],
  silver: [
    "High-quality stainless steel",
    "Light, durable entry card",
    "Printed QR wallet address",
    "Clean, simple design",
    "Basic laser engraving",
    "Simple protective sleeve",
    "$25,000 in Bitcoin equivalent"
  ]
};

/* ELEMENTS */
const cardViews = document.querySelectorAll(".card-view");
const qtyEl = document.getElementById("quantity");
const totalUSDEl = document.getElementById("totalUSD");
const totalBTCEle = document.getElementById("totalBTC");
const btcPriceLine = document.getElementById("btcPriceLine");
const countdownEl = document.getElementById("countdown");
const payNowBtn = document.getElementById("payNow");
const cardPerksEl = document.getElementById("cardPerks");

let selectedCard = "gold";
let currentBtcPrice = null;

/* QUANTITY RULES */
function setQuantityOptions(card){
  qtyEl.innerHTML = "";
  if(card === "silver"){
    for(let i=1; i<=50; i++){
      const opt = document.createElement("option");
      opt.value = opt.textContent = i;
      qtyEl.appendChild(opt);
    }
    qtyEl.disabled = false;
  } else {
    const opt = document.createElement("option");
    opt.value = "1";
    opt.textContent = "1";
    qtyEl.appendChild(opt);
    qtyEl.disabled = true;
  }
}

/* BTC PRICE FETCH */
async function fetchBtcPrice(){
  try {
    const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd");
    const json = await res.json();
    currentBtcPrice = Number(json.bitcoin.usd);
    btcPriceLine.innerText = "BTC Price: $" + currentBtcPrice.toLocaleString();
    updateTotals();
  } catch(e){
    btcPriceLine.innerText = "BTC Price unavailable";
  }
}
fetchBtcPrice();

/* COUNTDOWN */
const END_KEY = "order_end_ts_v1";
function getOrSetEndTs(){
  const exist = localStorage.getItem(END_KEY);
  if(exist) return Number(exist);
  const t = Date.now() + 48*3600*1000;
  localStorage.setItem(END_KEY, t);
  return t;
}
let endTs = getOrSetEndTs();

function runCountdown(){
  const diff = endTs - Date.now();
  if(diff<=0){ countdownEl.innerText="Expired"; return; }
  const h = Math.floor(diff/3600000);
  const m = Math.floor((diff%3600000)/60000);
  const s = Math.floor((diff%60000)/1000);
  countdownEl.innerText = `${h}h ${m}m ${s}s`;
}
setInterval(runCountdown,1000);
runCountdown();

function getPriceMap(){ return Date.now()>=endTs ? INCREASED_PRICES : BASE_PRICES; }

/* UPDATE PRICE */
function updateTotals(){
  const qty = Number(qtyEl.value || 1);
  const usd = getPriceMap()[selectedCard] * qty;
  totalUSDEl.innerText = "$" + usd.toLocaleString();

  if(currentBtcPrice){
    totalBTCEle.innerText = (usd/currentBtcPrice).toFixed(8) + " BTC";
  } else {
    totalBTCEle.innerText = "0 BTC";
  }
}

/* UPDATE PERKS */
function updatePerks(){
  const list = CARD_PERKS[selectedCard];
  cardPerksEl.classList.remove("show");
  void cardPerksEl.offsetWidth;
  cardPerksEl.innerHTML = "<strong>Perks:</strong><ul>" + list.map(p=>`<li>${p}</li>`).join("") + "</ul>";
  cardPerksEl.classList.add("show");
}

/* 3D TILT EFFECT */
cardViews.forEach(view=>{
  const img = view.querySelector(".card-img");
  view.addEventListener("mousemove", e=>{
    const r = view.getBoundingClientRect();
    const x = e.clientX - r.left - r.width/2;
    const y = e.clientY - r.top - r.height/2;
    const rx = (y/r.height)*15;
    const ry = -(x/r.width)*15;
    img.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
  });
  view.addEventListener("mouseleave", ()=>{
    img.style.transform = "rotateX(0) rotateY(0)";
  });
});

/* HOVER + CLICK LOGIC */
function applySelection(type){
  selectedCard = type;
  setQuantityOptions(type);
  updateTotals();
  updatePerks();
}

cardViews.forEach(view=>{
  const img = view.querySelector(".card-img");
  const type = view.dataset.type;

  view.addEventListener("mouseenter", ()=> applySelection(type));

  view.addEventListener("click", ()=>{
    document.querySelectorAll(".card-img").forEach(i=>i.classList.remove("selected"));
    img.classList.add("selected");
    applySelection(type);
  });
});

qtyEl.addEventListener("change", updateTotals);

/* INIT */
setQuantityOptions(selectedCard);
updateTotals();
updatePerks();

/* PAY NOW */
payNowBtn.addEventListener("click", ()=>{
  const qty = Number(qtyEl.value||1);
  const usd = getPriceMap()[selectedCard] * qty;
  const btc = currentBtcPrice ? (usd/currentBtcPrice).toFixed(8) : "";
  const params = new URLSearchParams({
    type:selectedCard,
    qty,
    usd,
    btc,
    addr: WALLET_ADDR
  });
  window.location.href = "wallet.html?" + params.toString();
});
</script>

</body>
</html>
