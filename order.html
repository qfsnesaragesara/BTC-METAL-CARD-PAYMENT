<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Order Metal Card — QFS</title>

<style>
:root{
  --gold:#fbbf24;
  --bg:#020617; /* deep slate/black */
  --card:#020617;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#38bdf8;
  --accent-soft:rgba(56,189,248,0.35);
  --radius:18px;
  --panel-w:420px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background:
    radial-gradient(circle at top, rgba(56,189,248,0.3), transparent 55%),
    radial-gradient(circle at bottom, rgba(147,51,234,0.32), transparent 60%),
    var(--bg);
  color:var(--text);
}

/* Layout */
.wrap {
  max-width:1080px;
  margin:36px auto;
  padding:18px;
  display:flex;
  gap:24px;
  align-items:flex-start;
  justify-content:center;
  flex-wrap:wrap;
}

/* Left visual column */
.visual {
  flex:1 1 520px;
  display:flex;
  flex-direction:column;
  gap:16px;
  align-items:center;
  border-radius:28px;
  padding:18px 18px 22px;
  background:linear-gradient(135deg, rgba(15,23,42,0.9), rgba(15,23,42,0.6));
  border:1px solid rgba(148,163,184,0.5);
  box-shadow:
    0 24px 80px rgba(15,23,42,0.85),
    0 0 0 1px rgba(15,23,42,0.9);
  backdrop-filter: blur(24px);
}

/* Card row (thumbnails) */
.card-row {
  display:flex;
  justify-content:center;
  gap:16px;
  margin-bottom:6px;
}

.card-view {
  width:150px;
  height:90px;
  border-radius:18px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at 0% 0%, rgba(248,250,252,0.16), transparent 55%);
  position:relative;
  transition: transform 0.18s ease-out, box-shadow 0.18s ease-out, border 0.18s ease-out;
  perspective:900px;
  border:1px solid rgba(148,163,184,0.45);
}

.card-view::before {
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:inherit;
  background:conic-gradient(from 210deg,
    rgba(56,189,248,0.0),
    rgba(56,189,248,0.3),
    rgba(147,51,234,0.4),
    rgba(56,189,248,0.0));
  opacity:0;
  transition:opacity 0.22s ease-out;
  pointer-events:none;
}

.card-view:hover {
  cursor:pointer;
  box-shadow:
    0 18px 50px rgba(15,23,42,0.9),
    0 0 40px rgba(56,189,248,0.2);
}

.card-view:hover::before {
  opacity:1;
}

.card-img {
  width:100%;
  height:auto;
  object-fit:cover;
  border-radius:14px;
  transition: transform 0.18s ease-out, border 0.18s ease-out, box-shadow 0.18s ease-out;
  border:2px solid transparent;
}

.card-img.selected {
  border:2px solid var(--accent);
  box-shadow:0 0 22px rgba(56,189,248,0.55);
}

/* Headings & text */
.title {
  font-size:20px;
  font-weight:700;
  text-align:center;
  margin-top:2px;
  letter-spacing:0.02em;
}
.desc {
  color:var(--muted);
  text-align:center;
  font-size:13px;
  margin-top:2px;
}

/* Perks panel: glass + gradient */
.perks-panel {
  margin-top:10px;
  padding:14px 14px 12px;
  border-radius:16px;
  background:
    linear-gradient(135deg, rgba(15,23,42,0.96), rgba(15,23,42,0.82));
  border:1px solid rgba(148,163,184,0.55);
  box-shadow:0 18px 60px rgba(15,23,42,0.9);
  width:100%;
  max-width:420px;
  opacity:0;
  transform: translateY(20px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}
.perks-panel.show {
  opacity:1;
  transform: translateY(0);
}
.perks-panel strong {
  display:block;
  font-size:15px;
  color:#f9fafb;
  margin-bottom:6px;
  letter-spacing:0.04em;
  text-transform:uppercase;
}
.perks-panel ul {
  padding-left:18px;
  margin:4px 0 0 0;
}
.perks-panel li {
  margin-bottom:4px;
  font-weight:600;
  font-size:13px;
  color:#e5e7eb;
}

/* Right panel (order details) */
.panel {
  width:var(--panel-w);
  background:linear-gradient(145deg, rgba(15,23,42,0.96), rgba(15,23,42,0.86));
  border-radius:24px;
  padding:20px 18px 22px;
  border:1px solid rgba(148,163,184,0.55);
  box-shadow:
    0 24px 80px rgba(15,23,42,0.95),
    0 0 0 1px rgba(15,23,42,0.9);
  backdrop-filter: blur(26px);
  display:flex;
  flex-direction:column;
  gap:10px;
}

.heading {
  font-size:20px;
  font-weight:750;
  letter-spacing:0.04em;
}
.sub {
  color:var(--muted);
  font-size:13px;
}

/* Quantity note line */
.qty-note {
  margin-top:8px;
  font-size:12px;
  color:#9ca3af;
  text-align:center;
  line-height:1.45;
}
.qty-note strong {
  color:#e5e7eb;
}

/* Form controls */
label {
  display:block;
  font-size:12px;
  color:#9ca3af;
  margin-top:12px;
  margin-bottom:6px;
  text-transform:uppercase;
  letter-spacing:0.08em;
}

select {
  width:100%;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.5);
  background:radial-gradient(circle at 0 0, rgba(148,163,184,0.16), rgba(15,23,42,1));
  color:var(--text);
  font-size:14px;
  outline:none;
  appearance:none;
  position:relative;
}
select:focus {
  border-color:var(--accent);
  box-shadow:0 0 0 1px rgba(56,189,248,0.6);
}

/* Price box */
.price-box {
  margin-top:14px;
  padding:14px 12px 12px;
  border-radius:18px;
  text-align:center;
  border:1px solid rgba(148,163,184,0.7);
  background:radial-gradient(circle at top, rgba(56,189,248,0.12), rgba(15,23,42,0.98));
  box-shadow:0 18px 60px rgba(15,23,42,0.9);
}
.usd {
  font-size:22px;
  font-weight:800;
  letter-spacing:0.03em;
}
.btc {
  margin-top:6px;
  color:#7dd3fc;
  font-weight:600;
  font-size:13px;
}
#btcPriceLine {
  margin-top:4px;
  font-size:11px;
  color:#9ca3af;
}

/* Countdown & helper text */
.countdown {
  text-align:center;
  color:#e5e7eb;
  font-size:12px;
  margin-top:10px;
}
.countdown span {
  color:#f97316;
  font-weight:600;
}
.muted {
  text-align:center;
  color:#6b7280;
  font-size:11px;
  margin-top:8px;
}

/* Button */
.pay-now-wrapper {
  display:flex;
  justify-content:center;
  margin-top:18px;
}
.pay-btn {
  padding:13px 34px;
  background:linear-gradient(135deg, #38bdf8, #a855f7);
  color:white;
  font-size:14px;
  font-weight:650;
  border:none;
  border-radius:999px;
  cursor:pointer;
  letter-spacing:0.08em;
  text-transform:uppercase;
  box-shadow:
    0 18px 45px rgba(56,189,248,0.45),
    0 0 0 1px rgba(15,23,42,1);
  transition: transform 0.16s ease-out, box-shadow 0.16s ease-out, filter 0.16s ease-out;
}
.pay-btn:hover {
  transform: translateY(-1px);
  filter:brightness(1.05);
  box-shadow:
    0 26px 70px rgba(59,130,246,0.65),
    0 0 0 1px rgba(15,23,42,1);
}
.pay-btn:active {
  transform: translateY(1px) scale(0.98);
  box-shadow:
    0 12px 30px rgba(15,23,42,0.9),
    0 0 0 1px rgba(15,23,42,1);
}

/* Responsive */
@media(max-width:960px) {
  .wrap {
    flex-direction:column;
    align-items:center;
  }
  .panel, .visual {
    width:100%;
    max-width:420px;
  }
  .card-row {
    justify-content:space-around;
  }
}
</style>
</head>
<body>

<div class="wrap">

  <div class="visual" id="visualCard">

    <div class="card-row">
      <div class="card-view" data-type="black">
        <img class="card-img" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/BlackCard.png" alt="Black Card">
      </div>
      <div class="card-view" data-type="gold">
        <img class="card-img selected" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/GoldCard.png" alt="Gold Card">
      </div>
      <div class="card-view" data-type="silver">
        <img class="card-img" src="https://raw.githubusercontent.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/main/SilverCard.png" alt="Silver Card">
      </div>
    </div>

    <div class="title">Physical Metal Bitcoin Access Card</div>
    <div class="desc">Premium laser-etched metal card with secure on-chain activation.</div>

    <div id="cardPerks" class="perks-panel"></div>

  </div>

  <div class="panel">

    <div class="heading">Order Details</div>
    <div class="sub">Choose your card and set your quantity.</div>

    <label for="quantity">Quantity</label>
    <select id="quantity"></select>

    <div class="price-box" id="priceBox">
      <div class="usd" id="totalUSD">$0</div>
      <div class="btc" id="totalBTC">0 BTC</div>
      <div id="btcPriceLine">BTC Price: Loading…</div>
    </div>

    <div class="qty-note">
      Black &amp; Gold: <strong>Limited to 1 per order</strong>.<br>
      Silver: <strong>Up to 50 per order</strong>.
    </div>

    <div class="countdown">Discount ends in: <span id="countdown">--:--:--</span></div>

    <div class="pay-now-wrapper">
      <button id="payNow" class="pay-btn">Pay Now</button>
    </div>

    <div class="muted">You will be redirected to the BTC payment page to complete your transaction.</div>
  </div>

</div>

<script>
/* PRICE TIERS */
const BASE_PRICES = {
  black: 275850,
  gold: 250765,
  silver: 3229
};

const INCREASED_PRICES = {
  black: 375650,
  gold: 255420,
  silver: 5899
};

const WALLET_ADDR = "bc1qqla2r8dmmvefq9svus0kv098nnvudsehpzmut8";

/* PERKS */
const CARD_PERKS = {
  black: [
    "Black matte + gold elite finish",
    "Very heavy collectible-grade metal construction",
    "QR, NFC & embedded cold-storage level security",
    "Rare, numbered series with custom engraving options",
    "Premium finishes and unique elite patterns",
    "VIP access: NFT drops, private events, exclusive airdrops",
    "Luxury display case with certificate of authenticity",
    "Advanced encrypted QR + holographic verification & secure chip",
    "Includes 25k Bitcoin allocation benefit"
  ],
  gold: [
    "Gold-plated premium alloy housing",
    "Heavier, ultra-premium in-hand feel",
    "Integrated QR + NFC chip for instant wallet access",
    "Limited batch, serialized numbering",
    "Laser-etched holographic engraving details",
    "Exclusive digital lounge & community perks",
    "Premium presentation box with protective inlay",
    "Tamper-evident hologram & security seal",
    "Includes 25k Bitcoin allocation benefit"
  ],
  silver: [
    "High-grade stainless steel core",
    "Lightweight, durable everyday carry feel",
    "Printed QR for direct wallet address access",
    "Minimal, clean and timeless design language",
    "Basic precision laser engraving",
    "Simple protective sleeve for daily use",
    "Includes $25,000 in Bitcoin equivalent value"
  ]
};

/* ELEMENTS */
const cardViews = document.querySelectorAll(".card-view");
const qtyEl = document.getElementById("quantity");
const totalUSDEl = document.getElementById("totalUSD");
const totalBTCEle = document.getElementById("totalBTC");
const btcPriceLine = document.getElementById("btcPriceLine");
const countdownEl = document.getElementById("countdown");
const payNowBtn = document.getElementById("payNow");
const cardPerksEl = document.getElementById("cardPerks");

let selectedCard = "gold";
let currentBtcPrice = null;

/* QUANTITY RULES */
function setQuantityOptions(card){
  qtyEl.innerHTML = "";
  if(card === "silver"){
    for(let i=1;i<=50;i++){
      const opt = document.createElement("option");
      opt.value = opt.textContent = i;
      qtyEl.appendChild(opt);
    }
    qtyEl.disabled = false;
  } else {
    const opt = document.createElement("option");
    opt.value = "1";
    opt.textContent = "1";
    qtyEl.appendChild(opt);
    qtyEl.disabled = true;
  }
}

/* BTC PRICE FETCH */
async function fetchBtcPrice(){
  try{
    const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd");
    const json = await res.json();
    currentBtcPrice = Number(json.bitcoin.usd);
    btcPriceLine.innerText = "BTC Price: $" + currentBtcPrice.toLocaleString();
    updateTotals();
  }catch(e){
    btcPriceLine.innerText = "BTC Price unavailable";
  }
}
fetchBtcPrice();

/* COUNTDOWN */
const END_KEY = "order_end_ts_v1";
function getOrSetEndTs(){
  const exist = localStorage.getItem(END_KEY);
  if(exist) return Number(exist);
  const t = Date.now() + 48*3600*1000;
  localStorage.setItem(END_KEY, t);
  return t;
}
let endTs = getOrSetEndTs();

function runCountdown(){
  const diff = endTs - Date.now();
  if(diff<=0){
    countdownEl.innerText = "Expired";
    return;
  }
  const h = Math.floor(diff/3600000);
  const m = Math.floor((diff%3600000)/60000);
  const s = Math.floor((diff%60000)/1000);
  countdownEl.innerText = `${h}h ${m}m ${s}s`;
}
setInterval(runCountdown, 1000);
runCountdown();

function getPriceMap(){
  return Date.now() >= endTs ? INCREASED_PRICES : BASE_PRICES;
}

/* UPDATE PRICE */
function updateTotals(){
  const qty = Number(qtyEl.value || 1);
  const usd = getPriceMap()[selectedCard] * qty;
  totalUSDEl.innerText = "$" + usd.toLocaleString();

  if(currentBtcPrice){
    totalBTCEle.innerText = (usd/currentBtcPrice).toFixed(8) + " BTC";
  } else {
    totalBTCEle.innerText = "0 BTC";
  }
}

/* UPDATE PERKS */
function updatePerks(){
  const list = CARD_PERKS[selectedCard] || [];
  cardPerksEl.classList.remove("show");
  void cardPerksEl.offsetWidth; // reflow for animation
  cardPerksEl.innerHTML =
    "<strong>Perks:</strong><ul>" +
    list.map(p => `<li>${p}</li>`).join("") +
    "</ul>";
  cardPerksEl.classList.add("show");
}

/* 3D TILT EFFECT */
cardViews.forEach(view=>{
  const img = view.querySelector(".card-img");
  view.addEventListener("mousemove", e=>{
    const r = view.getBoundingClientRect();
    const x = e.clientX - r.left - r.width/2;
    const y = e.clientY - r.top - r.height/2;
    const rx = (y/r.height)*14;
    const ry = -(x/r.width)*14;
    img.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
  });
  view.addEventListener("mouseleave", ()=>{
    img.style.transform = "rotateX(0deg) rotateY(0deg)";
  });
});

/* SELECTION LOGIC */
function applySelection(type){
  selectedCard = type;
  setQuantityOptions(type);
  updateTotals();
  updatePerks();
}

cardViews.forEach(view=>{
  const img = view.querySelector(".card-img");
  const type = view.dataset.type;

  view.addEventListener("mouseenter", ()=>{
    applySelection(type);
  });

  view.addEventListener("click", ()=>{
    document.querySelectorAll(".card-img").forEach(i=>i.classList.remove("selected"));
    img.classList.add("selected");
    applySelection(type);
  });
});

qtyEl.addEventListener("change", updateTotals);

/* INIT */
setQuantityOptions(selectedCard);
updateTotals();
updatePerks();

/* PAY NOW */
payNowBtn.addEventListener("click", ()=>{
  const qty = Number(qtyEl.value || 1);
  const usd = getPriceMap()[selectedCard] * qty;

  let btcValue;

  // Ensure BTC is NEVER empty
  if (currentBtcPrice && currentBtcPrice > 0) {
    btcValue = (usd / currentBtcPrice).toFixed(8);
  } else {
    // fallback if price didn't load yet
    btcValue = "0.00000000";
  }

  const params = new URLSearchParams({
    type: selectedCard,
    qty,
    usd,
    btc: btcValue,
    addr: WALLET_ADDR
  });

  window.location.href = "wallet.html?" + params.toString();
});
</script>

</body>
</html>
