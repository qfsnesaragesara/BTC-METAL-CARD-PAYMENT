<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="https://github.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/blob/main/photo%201.jpg?raw=true">
<title>Order Confirmation â€” QFS Metal Card</title>

<style>
  :root {
    --bg:#020617;
    --glass-bg:rgba(255,255,255,0.07);
    --glass-border:rgba(255,255,255,0.18);
    --text:#e2e8f0;
    --muted:#94a3b8;
    --accent:#38bdf8;
    --accent2:#a855f7;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: Inter, -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui;
    background:
      radial-gradient(circle at top, rgba(56,189,248,0.35), transparent 55%),
      radial-gradient(circle at bottom, rgba(147,51,234,0.35), transparent 60%),
      var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow-x: hidden;
  }

  .container {
    width: 90%;
    max-width: 520px;
    padding: 40px 34px;
    background: var(--glass-bg);
    border-radius: 28px;
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(28px);
    box-shadow:
      0 0 0 1px rgba(255,255,255,0.12),
      0 28px 80px rgba(0,0,0,0.65),
      inset 0 0 50px rgba(56,189,248,0.05);
    animation: floatUp 1.2s ease forwards;
    transform: translateY(22px);
    opacity: 0;
    text-align:center;
  }

  @keyframes floatUp {
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .logo {
    width: 160px;
    display: block;
    margin: 0 auto 18px auto;
    filter: drop-shadow(0 8px 14px rgba(56,189,248,0.25));
  }

  h1 {
    font-size: 32px;
    margin-bottom: 8px;
    font-weight: 800;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  p {
    color: var(--muted);
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 12px;
  }

  strong { color: var(--accent); }

  form {
    margin-top: 22px;
    text-align: left;
  }

  label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 6px;
    color: var(--text);
    display: block;
  }

  input[type="text"],
  input[type="email"],
  input[type="file"] {
    width: 100%;
    padding: 14px;
    margin-top: 4px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.06);
    color: var(--text);
    font-size: 16px;
    outline: none;
    transition: 0.25s ease;
    backdrop-filter: blur(12px);
  }

  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="file"]:focus {
    border-color: var(--accent);
    box-shadow: 0 0 12px rgba(56,189,248,0.45);
    background: rgba(255,255,255,0.12);
  }

  .btn {
    width: 100%;
    margin-top: 30px;
    padding: 15px;
    font-size: 18px;
    font-weight: 700;
    border-radius: 14px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #fff;
    border: none;
    cursor: pointer;
    transition: 0.25s ease;
    letter-spacing: 0.5px;
    box-shadow:
      0 10px 35px rgba(56,189,248,0.35),
      0 0 0 1px rgba(255,255,255,0.08);
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow:
      0 14px 45px rgba(56,189,248,0.55),
      0 0 0 1px rgba(255,255,255,0.18);
  }

  .order-note {
    margin-top:10px;
    font-size:13px;
    color:var(--muted);
  }
</style>
</head>

<body>
<div class="container">

    <img class="logo"
         src="https://github.com/qfsnesaragesara/BTC-METAL-CARD-PAYMENT/blob/main/photo%201.jpg?raw=true"
         alt="Brand Logo">

    <h1>Order Submitted</h1>
    <p><strong>Payment Confirmation Required</strong></p>
    <p>Upload your payment screenshot and TXID so we can verify your payment and ship your metal card.</p>
    <p class="order-note">A unique Order ID will be generated and shown on the next screen.</p>

    <form id="confirmForm">

        <label>Transaction Hash (TXID)</label>
        <input type="text" id="txid" required placeholder="Enter your TXID">

        <label>Your Email Address</label>
        <input type="email" id="email" required placeholder="Enter your email">

        <label>Upload Payment Screenshot</label>
        <input type="file" id="screenshot" accept="image/*" required>

        <button type="submit" class="btn">Submit Confirmation</button>
    </form>

</div>

<script>
// Generate Order ID
function generateOrderId() {
  const prefix = "QFS-";
  const chars = "ABCDEF0123456789";
  let suffix = "";
  for (let i = 0; i < 7; i++) {
    suffix += chars[Math.floor(Math.random() * chars.length)];
  }
  return prefix + suffix;
}

(function initOrderId() {
  const orderId = generateOrderId();
  localStorage.setItem("qfsOrderId", orderId);
})();


// Submit handler
document.getElementById("confirmForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const orderId = localStorage.getItem("qfsOrderId");
    const txid = document.getElementById("txid").value.trim();
    const email = document.getElementById("email").value.trim();
    const fileInput = document.getElementById("screenshot");

    if (!fileInput.files.length) {
        alert("Please upload a screenshot.");
        return;
    }

    const file = fileInput.files[0];

    const base64String = await toBase64(file);

    const payload = {
        orderId,
        txid,
        email,
        screenshotBase64: base64String.split(",")[1],
        screenshotName: file.name,
        screenshotType: file.type
    };

    fetch("https://script.google.com/macros/s/AKfycbyKkWctIa_lyDjqpqgvUtZ08xwwUOl3eJ_84JYHGeAxx4i3zGDm2PUqfJn1G3tZOvBEbA/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });

    setTimeout(() => {
        window.location.href = "https://qfsnesaragesara.github.io/BTC-METAL-CARD-PAYMENT/success-payment.html?order=" + encodeURIComponent(orderId);
    }, 1000);
});

function toBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = err => reject(err);
    });
}
</script>

</body>
</html>
