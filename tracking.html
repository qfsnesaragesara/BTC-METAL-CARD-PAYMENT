<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Track Your Order — QFS Metal Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg:#020617;
    --glass:rgba(255,255,255,0.06);
    --glass-border:rgba(255,255,255,0.15);
    --text:#e2e8f0;
    --muted:#94a3b8;
    --accent:#38bdf8;
    --accent2:#a855f7;
    --success:#22c55e;
}

body {
    margin:0;
    padding:0;
    font-family: Inter, -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui;
    background:
        radial-gradient(circle at top, rgba(56,189,248,0.35), transparent 55%),
        radial-gradient(circle at bottom, rgba(147,51,234,0.35), transparent 60%),
        var(--bg);
    color:var(--text);
    display:flex;
    justify-content:center;
    padding:40px 20px;
}

/* PAGE WRAPPER */
.wrapper {
    width:100%;
    max-width:720px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:26px;
    text-align:center;
}

/* GLASS PANEL */
.panel {
    width:100%;
    padding:32px;
    background:var(--glass);
    border-radius:28px;
    border:1px solid var(--glass-border);
    backdrop-filter:blur(26px);
    box-shadow:
        0 0 0 1px rgba(255,255,255,0.1),
        0 28px 90px rgba(0,0,0,0.65),
        inset 0 0 40px rgba(255,255,255,0.05);
    animation: fadeUp 1s ease forwards;
    transform: translateY(18px);
    opacity:0;
}

@keyframes fadeUp {
    to { opacity:1; transform:translateY(0); }
}

/* HEADER */
h1 {
    font-size:32px;
    margin-bottom:10px;
    font-weight:800;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

p {
    color:var(--muted);
    font-size:16px;
    margin-bottom:10px;
}

/* ORDER INPUT */
.input-box {
    width:100%;
    margin-bottom:12px;
}

input[type="text"] {
    width:100%;
    padding:15px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.15);
    background:rgba(255,255,255,0.07);
    color:var(--text);
    font-size:16px;
    outline:none;
    backdrop-filter:blur(10px);
    transition:0.25s ease;
}

input[type="text"]:focus {
    border-color:var(--accent);
    box-shadow:0 0 14px rgba(56,189,248,0.35);
    background:rgba(255,255,255,0.15);
}

.hint {
    font-size:13px;
    color:var(--muted);
    margin-bottom:18px;
}

/* TIMELINE */
.timeline {
    display:flex;
    flex-direction:column;
    gap:30px;
    padding:10px 0;
}

.stage {
    display:flex;
    align-items:center;
    gap:16px;
    opacity:0.35;
    transform:translateX(-10px);
    transition:0.4s ease;
}

.stage.active {
    opacity:1;
    transform:translateX(0);
}

.stage.completed {
    opacity:0.85;
}

/* CIRCLE ICON */
.circle {
    width:26px;
    height:26px;
    border-radius:50%;
    border:3px solid var(--muted);
    display:flex;
    align-items:center;
    justify-content:center;
}

.circle.active {
    border-color:var(--accent);
    box-shadow:0 0 12px rgba(56,189,248,0.65);
}

.circle.completed {
    border-color:var(--success);
    background:var(--success);
    box-shadow:0 0 14px rgba(34,197,94,0.65);
}

/* CHECKMARK */
.circle.completed::after {
    content:"";
    width:10px;
    height:18px;
    border-right:3px solid #fff;
    border-bottom:3px solid #fff;
    transform:rotate(45deg);
}

/* LABEL */
.stage label {
    font-size:17px;
    font-weight:600;
    color:var(--text);
    letter-spacing:0.3px;
}

/* BUTTON */
.btn {
    margin-top:24px;
    padding:14px;
    width:250px;
    border-radius:14px;
    font-size:17px;
    font-weight:700;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    color:white;
    text-decoration:none;
    transition:0.25s ease;
    box-shadow:0 16px 45px rgba(56,189,248,0.35);
}

.btn:hover {
    transform:translateY(-2px);
    box-shadow:0 20px 55px rgba(56,189,248,0.55);
}
</style>
</head>
<body>

<div class="wrapper">
    <div class="panel">
        <h1>Track Your Order</h1>
        <p>Enter your Order ID to unlock live status tracking.</p>

        <div class="input-box">
            <input type="text" id="orderID" placeholder="Enter your Order ID (e.g. QFS-XXXXXXX)">
        </div>
        <div class="hint" id="trackingHint">
            Your Order ID is shown on the confirmation success screen.
        </div>

        <div class="timeline">
            <div class="stage" id="s1">
                <div class="circle"></div>
                <label>1. Order Received</label>
            </div>
            <div class="stage" id="s2">
                <div class="circle"></div>
                <label>2. Payment Verified</label>
            </div>
            <div class="stage" id="s3">
                <div class="circle"></div>
                <label>3. Card Minted</label>
            </div>
            <div class="stage" id="s4">
                <div class="circle"></div>
                <label>4. Card Engraved</label>
            </div>
            <div class="stage" id="s5">
                <div class="circle"></div>
                <label>5. Shipping Prepared</label>
            </div>
            <div class="stage" id="s6">
                <div class="circle"></div>
                <label>6. Out for Delivery</label>
            </div>
        </div>

        <a href="index.html" class="btn">Return Home</a>
    </div>
</div>

<script>
const STAGE_1_TO_2_DELAY = 15 * 60 * 1000; // 15 minutes
const STAGE_STEP_DELAY   = 10 * 60 * 1000; // 10 minutes between later stages (adjust if you want)

let currentStage = 1;
let unlocked     = false;
let timerId      = null;

// Get expected Order ID from localStorage or URL
const params          = new URLSearchParams(window.location.search);
const urlOrderId      = params.get("order");
const storedOrderId   = localStorage.getItem("qfsOrderId");
let expectedOrderId   = urlOrderId || storedOrderId || "";

if (urlOrderId && !storedOrderId) {
    localStorage.setItem("qfsOrderId", urlOrderId);
    expectedOrderId = urlOrderId;
}

expectedOrderId = (expectedOrderId || "").trim().toUpperCase();

const hintEl    = document.getElementById("trackingHint");
const orderInput= document.getElementById("orderID");

// Update visuals based on currentStage
function updateTracking() {
    for (let i = 1; i <= 6; i++) {
        const stage  = document.getElementById(`s${i}`);
        const circle = stage.querySelector('.circle');

        stage.classList.remove('active', 'completed');
        circle.classList.remove('active', 'completed');

        if (!unlocked) {
            // Locked mode: only show Stage 1 as baseline active
            if (i === 1) {
                stage.classList.add('active');
                circle.classList.add('active');
            }
            continue;
        }

        if (i < currentStage) {
            stage.classList.add('completed');
            circle.classList.add('completed');
        } else if (i === currentStage) {
            stage.classList.add('active');
            circle.classList.add('active');
        }
    }
}

// Schedule next stage jump
function scheduleNext(initialDelay) {
    clearTimeout(timerId);
    timerId = setTimeout(() => {
        if (!unlocked) return;
        if (currentStage >= 6) return;

        currentStage++;
        updateTracking();

        if (currentStage < 6) {
            scheduleNext(STAGE_STEP_DELAY);
        }
    }, initialDelay);
}

function startTracking() {
    if (unlocked) return;
    unlocked = true;
    currentStage = 1;
    updateTracking();
    hintEl.textContent = "Tracking unlocked. Status will update over time as your order progresses.";
    scheduleNext(STAGE_1_TO_2_DELAY);
}

// Input validation
orderInput.addEventListener("input", () => {
    const entered = orderInput.value.trim().toUpperCase();

    if (!expectedOrderId) {
        hintEl.textContent = "No Order ID found for this browser. Please use the same device you used to confirm payment.";
        return;
    }

    if (entered.length === 0) {
        hintEl.textContent = "Enter your Order ID to unlock tracking.";
        return;
    }

    if (entered === expectedOrderId) {
        hintEl.textContent = "Order ID recognized. Unlocking tracking…";
        startTracking();
    } else {
        hintEl.textContent = "Order ID not recognized. Please check and try again.";
    }
});

// Initial locked view
updateTracking();
</script>

</body>
</html>
